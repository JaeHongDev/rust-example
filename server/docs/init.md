Rust로 라이브러리 없이 웹 애플리케이션을 개발하기 위해서는 요구사항을 명확히 정의해야 합니다. 아래는 프로젝트 요구사항을 꼼꼼하게 작성한 예입니다.

---

# **Rust로 웹 애플리케이션 개발 요구사항**

## **1. 프로젝트 개요**
Rust의 표준 라이브러리만을 사용하여 기본적인 웹 애플리케이션을 개발한다. HTTP 요청을 처리하고 간단한 HTML 응답을 반환하며, 동적인 요청 처리와 데이터 관리 기능도 포함한다.

---

## **2. 기능 요구사항**

### **2.1 HTTP 요청 및 응답**
1. **HTTP 프로토콜 처리**
    - HTTP/1.1 표준을 준수할 것.
    - GET, POST 메서드를 지원.
    - 요청 헤더와 본문을 분석하여 적절히 처리.
    - 응답 헤더를 구성하고, 응답 본문을 포함하여 반환.

2. **라우팅**
    - URI 경로에 따라 적절한 핸들러를 호출.
    - 정적 파일 제공 기능 구현 (예: `/static` 경로에서 HTML, CSS, JS 파일 제공).
    - 동적 요청 처리 (예: `/hello?name=Rust`와 같은 쿼리 파라미터 지원).

3. **상태 코드 반환**
    - 요청 성공 시 `200 OK`.
    - 요청한 리소스를 찾을 수 없을 경우 `404 Not Found`.
    - 메서드가 지원되지 않을 경우 `405 Method Not Allowed`.

---

### **2.2 서버 동작**
1. **TCP 서버**
    - 표준 라이브러리의 `std::net::TcpListener`를 사용하여 서버 구현.
    - 기본적으로 `127.0.0.1:8080`에서 실행되도록 설정.
    - 다중 클라이언트 요청을 처리하기 위한 반복 구조 구현.

2. **동시성 처리**
    - 각 요청을 별도의 스레드에서 처리 (`std::thread` 사용).
    - 최대 연결 수 제한 (예: 10개) 구현.
    - 초과 연결 시 대기하거나 연결을 종료.

3. **에러 처리**
    - 요청 처리 중 발생할 수 있는 오류(잘못된 요청 형식, 리소스 없음 등)를 적절히 처리하고, 사용자에게 명확한 응답 반환.

---

### **2.3 동적 페이지 및 데이터 관리**
1. **동적 페이지 생성**
    - 동적 경로에서 사용자 입력 처리 (예: `/greet?name=John` → `Hello, John!` 출력).
    - JSON 데이터 응답 지원 (예: `/api/status` → `{ "status": "ok" }`).

2. **간단한 데이터 저장소**
    - 메모리 기반 데이터 저장소 구현 (예: `Vec` 또는 `HashMap`).
    - POST 요청으로 데이터를 저장하고, GET 요청으로 데이터를 조회.
    - 예:
        - POST `/items` → 데이터 저장 (`{"name": "item1", "price": 100}`)
        - GET `/items` → 저장된 데이터 반환.

---

### **2.4 HTML 및 정적 파일 제공**
1. **HTML 파일 제공**
    - `/` 경로에서 기본 HTML 페이지 반환 (예: `index.html`).
    - HTML 페이지에 동적 데이터를 삽입하여 클라이언트에 렌더링.

2. **정적 파일 제공**
    - `/static` 경로에서 CSS, JavaScript, 이미지 파일 제공.
    - 파일 경로를 파싱하고, 파일이 존재하지 않을 경우 `404` 반환.

---

## **3. 비기능 요구사항**

### **3.1 성능**
1. 동시 최대 10개의 클라이언트 요청을 처리할 수 있을 것.
2. 정적 파일 요청은 최소한의 성능 저하로 처리.

### **3.2 보안**
1. 악의적인 요청(예: 잘못된 메서드, 경로 탐색 시도 등)을 방어.
2. HTTP 헤더에 보안 관련 설정 추가 (예: `Content-Security-Policy`, `X-Content-Type-Options` 등).

### **3.3 확장성**
1. 새로운 라우트를 쉽게 추가할 수 있도록 코드 설계.
2. 데이터 저장소를 파일 기반이나 데이터베이스로 확장 가능하도록 구조화.

---

## **4. 개발 및 테스트 요구사항**

### **4.1 개발**
1. **Rust 표준 라이브러리만 사용**.
    - 외부 라이브러리나 크레이트 사용 금지.
    - HTTP, JSON 파싱 등은 직접 구현.
2. **코드 스타일**
    - Rust의 표준 코딩 규칙 준수 (Rustfmt 및 Clippy 사용).

### **4.2 테스트**
1. 각 기능별 단위 테스트 작성.
2. 다음 시나리오에 대한 통합 테스트:
    - 정상적인 GET/POST 요청.
    - 없는 리소스 요청 (`404`).
    - 정적 파일 요청.
    - 동적 데이터 요청 및 응답.

---

## **5. 개발 단계**
1. **기본 서버 구현**
    - TCP 서버 시작 및 간단한 HTTP 요청 처리.
2. **라우팅 및 정적 파일 처리**
    - 요청 경로에 따른 핸들러 호출 및 파일 제공.
3. **동적 데이터 처리**
    - GET/POST 요청 처리 및 메모리 데이터 관리.
4. **HTML 및 JSON 응답**
    - 동적 HTML 페이지 및 JSON 응답 구현.
5. **성능 최적화**
    - 다중 클라이언트 요청 처리 및 오류 방어.

---

이 요구사항을 따라가면서 개발하면, 라이브러리 없이도 실질적인 기능을 갖춘 Rust 기반 웹 애플리케이션을 만들 수 있습니다. 추가적으로, 구현 중 추가된 아이디어나 요구사항은 유연하게 반영할 수 있도록 구조를 설계하세요!